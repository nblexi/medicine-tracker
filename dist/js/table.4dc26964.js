"use strict";(self["webpackChunkmedicine_tracker"]=self["webpackChunkmedicine_tracker"]||[]).push([[853],{138:(e,t,l)=>{l.r(t),l.d(t,{default:()=>R});var a=l(641);const s={class:"container w-100"};function n(e,t,l,n,p,o){const r=(0,a.g2)("Table");return(0,a.uX)(),(0,a.CE)("div",s,[((0,a.uX)(),(0,a.Wv)(r,{key:p.tableKey,updateTable:o.forceRerender},null,8,["updateTable"]))])}var p=l(953),o=l(33),r=l(241);const u=e=>((0,a.Qi)("data-v-0e6d3f7c"),e=e(),(0,a.jt)(),e),c={class:"w-100"},i=u((()=>(0,a.Lk)("tr",null,[(0,a.Lk)("th",{class:"pt-2 px-2"},"name"),(0,a.Lk)("th",{class:"pt-2 px-2"},"/blister"),(0,a.Lk)("th",{class:"pt-2 px-2"},"blisters"),(0,a.Lk)("th",{class:"pt-2 px-2"},"loose"),(0,a.Lk)("th",{class:"pt-2 px-2"},"pillbox (portion)"),(0,a.Lk)("th",{class:"pt-2 px-2"},"pills"),(0,a.Lk)("th",{class:"pt-2 px-2"},"days"),(0,a.Lk)("th",{class:"pt-2 px-2"},"needed for target"),(0,a.Lk)("th",{class:"pt-2 px-2"},"pills to get"),(0,a.Lk)("th",{class:"pt-2 px-2"},"blisters to get"),(0,a.Lk)("th",{class:"pt-2 px-2"},"will run out")],-1))),d={class:"pt-2 px-2"},b={class:"pt-2 px-2"},_={class:"pt-2 px-2"},k=["value"],h={class:"pt-2 px-2"},m=["value"],v={class:"pt-2 px-2"},f=["value"],x={class:"pt-2 px-2"},L={class:"pt-2 px-2"},g={class:"pt-2 px-2"},y={class:"pt-2 px-2"},F={class:"pt-2 px-2"},w={class:"pt-2 px-2"},M=["id","onClick"],C=u((()=>(0,a.Lk)("i",{class:"bi bi-floppy2"},null,-1))),T=[C],D={__name:"Table",props:{updateTable:{type:Function}},setup(e){const t=r.O.value,l=r.s.value.target_date;let s=r.s.value.target_days;const n=e;function u(e,t=2){const l=Math.pow(10,t);return Math.trunc(parseFloat(e)*l)/l}let C=(e,t)=>{const l=Math.abs(t-e),a=Math.ceil(l/864e5);return parseFloat(a)},D=e=>{let a=t.findIndex((t=>t.name===e));if(-1!==a){let p=parseFloat(document.getElementsByName("blister")[a].value),o=parseFloat(document.getElementsByName("loose")[a].value),u=parseFloat(document.getElementsByName("pillbox")[a].value),c=parseFloat(t[a].ppb),i=parseFloat(t[a].dose),d=parseFloat(t[a].frequency),b=new Date,_=b.getFullYear(),k=b.getMonth()+1,h=b.getDate(),m=`${k}/${h}/${_}`;console.log(m),console.log(l),s=C(new Date(m),new Date(l)),r.s.set({target_days:s,...r.s.value});let v=p*c+o+u*i,f=parseFloat(v/(d*i)),x=Math.ceil(s*(i*d)),L=Math.ceil(x-v),g=Math.ceil(L/c);b.setDate(b.getDate()+f);let y=`${b.getDate()}/${b.getMonth()+1}/${b.getFullYear()}`,F=[...t];F[a]={name:e,frequency:t[a].frequency,dose:t[a].dose,ppb:t[a].ppb,blister_number:p,loose_number:o,pillbox_number:u,total_pills:v,total_days:f,needed_for_target:x,need_pills:L,need_blisters:g,will_run_out:y},r.O.set(F),n.updateTable()}};return(e,l)=>((0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("table",c,[i,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,p.R1)(t),(e=>((0,a.uX)(),(0,a.CE)("tr",null,[(0,a.Lk)("td",d,(0,o.v_)(e.name),1),(0,a.Lk)("td",b,(0,o.v_)(e.ppb),1),(0,a.Lk)("td",_,[(0,a.Lk)("input",{class:"form-control custom",name:"blister",value:e.blister_number},null,8,k)]),(0,a.Lk)("td",h,[(0,a.Lk)("input",{class:"form-control custom",name:"loose",value:e.loose_number},null,8,m)]),(0,a.Lk)("td",v,[(0,a.Lk)("input",{class:"form-control wider_custom",name:"pillbox",value:e.pillbox_number},null,8,f)]),(0,a.Lk)("td",x,(0,o.v_)(u(parseFloat(e.total_pills))),1),(0,a.Lk)("td",L,(0,o.v_)(u(parseFloat(e.total_days))),1),(0,a.Lk)("td",g,(0,o.v_)(Math.ceil(parseFloat(e.needed_for_target))),1),(0,a.Lk)("td",y,(0,o.v_)(u(Math.ceil(parseFloat(e.need_pills)))),1),(0,a.Lk)("td",F,(0,o.v_)(Math.ceil(parseFloat(e.need_blisters))),1),(0,a.Lk)("td",w,(0,o.v_)(e.will_run_out),1),(0,a.Lk)("td",{class:"save",id:e.name,onClick:t=>(0,p.R1)(D)(e.name)},T,8,M)])))),256))])]))}};var E=l(262);const $=(0,E.A)(D,[["__scopeId","data-v-0e6d3f7c"]]),X=$,K={name:"TableView",components:{Table:X},data(){return{tableKey:0}},methods:{forceRerender(){this.tableKey+=1}}},O=(0,E.A)(K,[["render",n]]),R=O},241:(e,t,l)=>{l.d(t,{s:()=>n,O:()=>p});let a=[],s=(e,t)=>{let l=[],s={get(){return s.lc||s.listen((()=>{}))(),s.value},l:t||0,lc:0,listen(e,t){return s.lc=l.push(e,t||s.l)/2,()=>{let t=l.indexOf(e);~t&&(l.splice(t,2),--s.lc||s.off())}},notify(e,t){let n=!a.length;for(let p=0;p<l.length;p+=2)a.push(l[p],l[p+1],s.value,e,t);if(n){for(let e=0;e<a.length;e+=5){let t;for(let l=e+1;!t&&(l+=5)<a.length;)a[l]<a[e+1]&&(t=a.push(a[e],a[e+1],a[e+2],a[e+3],a[e+4]));t||a[e](a[e+2],a[e+3],a[e+4])}a.length=0}},off(){},set(e){let t=s.value;t!==e&&(s.value=e,s.notify(t))},subscribe(e,t){let l=s.listen(e,t);return e(s.value),l},value:e};return s};const n=s({}),p=s([])}}]);
//# sourceMappingURL=table.4dc26964.js.map