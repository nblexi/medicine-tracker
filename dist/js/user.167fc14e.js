"use strict";(self["webpackChunkmedicine_tracker"]=self["webpackChunkmedicine_tracker"]||[]).push([[806],{825:(e,t,a)=>{a.r(t),a.d(t,{default:()=>O});var l=a(641);const s={class:"mx-auto w-50 container"};function n(e,t,a,n,r,o){const u=(0,l.g2)("User"),d=(0,l.g2)("Files");return(0,l.uX)(),(0,l.CE)("div",s,[((0,l.uX)(),(0,l.Wv)(u,{key:r.userInfoKey})),(0,l.bF)(d,{updateUserInfo:o.forceRerender},null,8,["updateUserInfo"])])}var r=a(953),o=a(751),u=a(33),d=a(241);const i=e=>((0,l.Qi)("data-v-be2086ee"),e=e(),(0,l.jt)(),e),c={class:"row"},v={class:"mb-4 row text-start"},_=i((()=>(0,l.Lk)("label",{for:"medicine_name",class:"form-label text-light"},"Name:",-1))),b={class:"mb-4 row text-start"},f=i((()=>(0,l.Lk)("label",{for:"target_label",class:"form-label text-light"},"Target Date:",-1))),m={key:0,class:"form-field-label",for:"target_label"},p={class:"mb-4 row text-start"},g=i((()=>(0,l.Lk)("label",{for:"start_label",class:"form-label text-light"},"Start Date:",-1))),k={key:0,class:"form-field-label",for:"start_label"},y={__name:"User",setup(e){d.O.value,(0,r.KR)(d.s.value.name);const t=(0,r.KR)(d.s.value.target_date),a=((0,r.KR)(d.s.value.target_days),(0,r.KR)(d.s.value.start_date));(0,r.KR)(d.s.value.on_days);let s,n,i,y=e=>{let t=e.split("/")[0],a=e.split("/")[1],l=e.split("/")[2];return`${l}-${t}-${a}`},$=e=>{console.log(e);let t=e.split("-")[0],a=e.split("-")[1],l=e.split("-")[2];return`${a}/${l}/${t}`},h=(e,t)=>{const a=Math.abs(t-e),l=Math.ceil(a/864e5);return parseFloat(l)},R=e=>""!=e&&null!=e&&void 0!=e&&("string"===typeof e&&e.trim().length>0);if(null==d.s.value.target_date&&void 0==d.s.value.target_date||(s=y(d.s.value.target_date)),null==d.s.value.start_date&&void 0==d.s.value.start_date||(n=y(d.s.value.start_date)),i=R(d.s.value.name)?d.s.value.name:"",R(s)){let e=new Date,a=e.getFullYear(),l=e.getMonth()+1,s=e.getDate(),n=`${l}/${s}/${a}`,r=h(new Date(n),new Date(t.value));d.s.set({target_days:r,...d.s.value})}if(R(n)){let e=new Date,t=e.getFullYear(),l=e.getMonth()+1,s=e.getDate(),n=`${l}/${s}/${t}`,r=h(new Date(a.value),new Date(n));r+=1,d.s.set({on_days:r,...d.s.value})}let L=d.s.value.on_days,w=d.s.value.target_days,I=()=>{let e=i.trim();if(R(e)&&R(n)&&R(s)){let t=$(s);console.log(t);let a=$(n);d.s.set({target_date:t,start_date:a,name:e,...d.s.value})}else console.log("Invalid data")};return(e,t)=>((0,l.uX)(),(0,l.CE)("div",c,[(0,l.Lk)("div",v,[_,(0,l.bo)((0,l.Lk)("input",{class:"form-control al_left",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>(0,r.i9)(i)?i.value=e:i=e),onInput:t[1]||(t[1]=t=>e.text=t.target.value)},null,544),[[o.Jo,(0,r.R1)(i)]])]),(0,l.Lk)("div",b,[f,(0,l.bo)((0,l.Lk)("input",{type:"date",id:"target_date","onUpdate:modelValue":t[2]||(t[2]=e=>(0,r.i9)(s)?s.value=e:s=e)},null,512),[[o.Jo,(0,r.R1)(s)]]),(0,r.R1)(w)>0?((0,l.uX)(),(0,l.CE)("label",m,(0,u.v_)((0,r.R1)(w))+" days ",1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",p,[g,(0,l.bo)((0,l.Lk)("input",{type:"date",id:"start_date","onUpdate:modelValue":t[3]||(t[3]=e=>(0,r.i9)(n)?n.value=e:n=e)},null,512),[[o.Jo,(0,r.R1)(n)]]),(0,r.R1)(L)>0?((0,l.uX)(),(0,l.CE)("label",k,(0,u.v_)((0,r.R1)(L))+" days ",1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",null,[(0,l.Lk)("button",{class:"btn btn-dark",onClick:t[4]||(t[4]=(...e)=>(0,r.R1)(I)&&(0,r.R1)(I)(...e))},"Save")])]))}};var $=a(262);const h=(0,$.A)(y,[["__scopeId","data-v-be2086ee"]]),R=h,L=e=>((0,l.Qi)("data-v-06bc79a2"),e=e(),(0,l.jt)(),e),w={class:"mt-5 bg-light"},I=L((()=>(0,l.Lk)("input",{class:"",type:"file",id:"fileInput",name:"filename"},null,-1))),C={class:"mt-4"},D={class:"mt-4"},x={__name:"Files",props:{updateUserInfo:{type:Function}},setup(e){const t=e;let a=d.O.value,s=d.s.value.name,n=d.s.value.start_date,o=d.s.value.target_date,i=d.s.value.target_days,c=(0,r.KR)("Clear Data"),v=0,_=()=>{let e,l,s,n;const r=document.getElementById("fileInput"),o=r.files[0];if(o){const t=new FileReader;t.onload=t=>{const r=t.target.result,o=r.split("\n"),u=o[0].split(",");e=u[0],l=u[1],s=u[2],n=u[3],d.s.set({name:e,start_date:l,target_date:s,target_days:n}),o.slice(1).map((e=>{const t=e.split(",");if(""!=t){console.log(t);let e={name:t[0],frequency:t[1],dose:t[2],ppb:t[3],blister_number:t[4],loose_number:t[5],pillbox_number:t[6],total_pills:t[7],total_days:t[8],needed_for_target:t[9],need_pills:t[10],need_blisters:t[11],will_run_out:t[12]};a.push(e)}})),console.log(a),d.O.set(a)},t.readAsText(o)}setTimeout((()=>{t.updateUserInfo()}),500)},b=()=>{let e="data:text/csv;charset=utf-8,";e+=`${s},${n},${o},${i}\n`,a.forEach((t=>{e+=`${t.name},${t.frequency},${t.dose},${t.ppb},${t.blister_number},${t.loose_number},${t.pillbox_number},${t.total_pills},${t.total_days},${t.needed_for_target},${t.need_pills},${t.need_blisters},${t.will_run_out}\n`}));const t=document.createElement("a");t.href=encodeURI(e),t.download="data.csv",t.click()},f=()=>{let e=()=>{d.O.set([]),d.s.set({name:"",start_date:"",target_date:"",target_days:""}),t.updateUserInfo()},a=document.getElementById("del");0==v?(a.classList.remove("btn-danger"),a.classList.add("btn-warning"),c.value="Confirm Clear All Data",v++):(e(),a.classList.remove("btn-warning"),a.classList.add("btn-secondary"),c.value="Data Cleared",setTimeout((()=>{a.classList.remove("btn-secondary"),a.classList.add("btn-danger"),c.value="Clear Data"}),"3500"),v=0)};return(e,t)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",w,[I,(0,l.Lk)("button",{class:"btn btn-outline-dark",onClick:t[0]||(t[0]=(...e)=>(0,r.R1)(_)&&(0,r.R1)(_)(...e))},"Upload")]),(0,l.Lk)("div",C,[(0,l.Lk)("button",{class:"w-100 btn btn-lg btn-info",onClick:t[1]||(t[1]=(...e)=>(0,r.R1)(b)&&(0,r.R1)(b)(...e))},"Download")]),(0,l.Lk)("div",D,[(0,l.Lk)("button",{class:"w-100 btn btn-lg btn-danger",id:"del",onClick:t[2]||(t[2]=(...e)=>(0,r.R1)(f)&&(0,r.R1)(f)(...e))},(0,u.v_)((0,r.R1)(c)),1)])],64))}},U=(0,$.A)(x,[["__scopeId","data-v-06bc79a2"]]),F=U,K={name:"UserView",components:{User:R,Files:F},data(){return{userInfoKey:0}},methods:{forceRerender(){this.userInfoKey+=1}}},E=(0,$.A)(K,[["render",n]]),O=E},241:(e,t,a)=>{a.d(t,{s:()=>n,O:()=>r});let l=[],s=(e,t)=>{let a=[],s={get(){return s.lc||s.listen((()=>{}))(),s.value},l:t||0,lc:0,listen(e,t){return s.lc=a.push(e,t||s.l)/2,()=>{let t=a.indexOf(e);~t&&(a.splice(t,2),--s.lc||s.off())}},notify(e,t){let n=!l.length;for(let r=0;r<a.length;r+=2)l.push(a[r],a[r+1],s.value,e,t);if(n){for(let e=0;e<l.length;e+=5){let t;for(let a=e+1;!t&&(a+=5)<l.length;)l[a]<l[e+1]&&(t=l.push(l[e],l[e+1],l[e+2],l[e+3],l[e+4]));t||l[e](l[e+2],l[e+3],l[e+4])}l.length=0}},off(){},set(e){let t=s.value;t!==e&&(s.value=e,s.notify(t))},subscribe(e,t){let a=s.listen(e,t);return e(s.value),a},value:e};return s};const n=s({}),r=s([])}}]);
//# sourceMappingURL=user.167fc14e.js.map